<div style="max-width: 400px; margin: 2rem auto;">
  <div class="card">
    <h2 style="text-align: center; margin-bottom: 2rem;">Login</h2>

    <% if flash[:error] %>
      <div class="alert alert-error">
        <%= flash[:error] %>
      </div>
    <% end %>

    <% if flash[:success] %>
      <div class="alert alert-success">
        <%= flash[:success] %>
      </div>
    <% end %>

    <%= form_with url: sessions_path, method: :post, local: true do |f| %>
      <div class="form-group">
        <label for="email">Email Address:</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="you@example.com"
          required
          value="<%= params[:email] %>"
        >
      </div>

      <div class="form-group">
        <label for="password">Password:</label>
        <input
          type="password"
          id="password"
          name="password"
          placeholder="Enter password (min 6 chars)"
          required
        >
      </div>

      <div class="form-group">
        <label>
          <input type="checkbox" id="remember" name="remember">
          Remember me
        </label>
      </div>

      <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
    <% end %>

    <div style="margin-top: 1.5rem; text-align: center;">
      <p>Don't have an account? <a href="/sessions/new">Sign up</a></p>
      <p><a href="/">Back to Home</a></p>
    </div>
  </div>

  <div class="card">
    <h3>Test Credentials</h3>
    <p>For testing purposes, use:</p>
    <ul>
      <li>Email: any valid email format</li>
      <li>Password: any password with 6+ characters</li>
    </ul>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');

    // Real-time validation
    emailInput.addEventListener('blur', function() {
      if (this.value && !this.value.includes('@')) {
        this.style.borderColor = '#e74c3c';
      } else {
        this.style.borderColor = '#ddd';
      }
    });

    passwordInput.addEventListener('input', function() {
      const strength = this.value.length;
      if (strength > 0 && strength < 6) {
        this.style.borderColor = '#e74c3c';
      } else if (strength >= 6) {
        this.style.borderColor = '#27ae60';
      } else {
        this.style.borderColor = '#ddd';
      }
    });

    // Form submission
    form.addEventListener('submit', function(e) {
      let isValid = true;

      if (!emailInput.value.includes('@')) {
        emailInput.style.borderColor = '#e74c3c';
        isValid = false;
      }

      if (passwordInput.value.length < 6) {
        passwordInput.style.borderColor = '#e74c3c';
        isValid = false;
      }

      if (!isValid) {
        e.preventDefault();
        alert('Please fix the errors before submitting');
      }
    });
  });
</script>
