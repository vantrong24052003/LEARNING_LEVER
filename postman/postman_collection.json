{
	"info": {
		"_postman_id": "letta-api-collection",
		"name": "Letta API Platform",
		"description": "Toàn bộ API cho Letta Server (Node.js) và Rails Client Integration",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Letta Server (Node.js API)",
			"item": [
				{
					"name": "Agent",
					"item": [
						{
							"name": "Create Customer Support Agent",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Smart Assistant\",\n    \"system\": \"Bạn là một trợ lý chuyên nghiệp. Khi trả lời người dùng: 1. Hãy diễn đạt tự nhiên, tránh dùng ngôn ngữ kỹ thuật. 2. Tuyệt đối KHÔNG hiển thị ID hệ thống hoặc nhắc tên các công cụ (tool) bạn đã sử dụng. 3. Chỉ tập trung vào kết quả cuối cùng.\",\n    \"tools\": [\"post_finder\", \"data_comparator\", \"statistics_aggregator\", \"calculator\"],\n    \"memory_blocks\": [\n        {\n            \"label\": \"human\",\n            \"value\": \"Tên tôi là Trọng, tôi là quản trị viên hệ thống.\"\n        }\n    ]\n}"
								},
								"url": {
									"raw": "http://localhost:4000/api/letta/agents",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "4000",
									"path": [
										"api",
										"letta",
										"agents"
									]
								}
							}
						},
						{
							"name": "Get Agent Detail",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:4000/api/letta/agents/:agentId",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "4000",
									"path": [
										"api",
										"letta",
										"agents",
										":agentId"
									],
									"variable": [
										{
											"key": "agentId",
											"value": "{{AGENT_ID}}"
										}
									]
								}
							}
						},
						{
							"name": "Chat / Approve / Tool Output",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"message\": \"Tìm cho tôi các bài viết của Samara Corwin\"\n}"
								},
								"url": {
									"raw": "http://localhost:4000/api/letta/agents/:agentId/messages",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "4000",
									"path": [
										"api",
										"letta",
										"agents",
										":agentId",
										"messages"
									],
									"variable": [
										{
											"key": "agentId",
											"value": "{{AGENT_ID}}"
										}
									]
								}
							}
						}
					]
				},
				{
					"name": "Tool",
					"item": [
						{
							"name": "Register Post Finder",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"sourceCode\": \"def post_finder(author_name: str = None, keyword: str = None, limit: int = 10, status: str = None):\\n    \\\"\\\"\\\"\\n    Find posts by author name, keyword, or status. Returns a list of posts with title, status, and author.\\n    \\n    Args:\\n        author_name (str): Name of the author to filter by\\n        keyword (str): Keyword to search in post title\\n        status (str): Status of the post (e.g. published, draft)\\n        limit (int): Max number of results to return\\n    \\\"\\\"\\\"\\n    pass\",\n    \"description\": \"Find posts by author name, keyword, or status.\",\n    \"name\": \"post_finder\"\n}"
								},
								"url": {
									"raw": "http://localhost:4000/api/letta/tools",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "4000",
									"path": [
										"api",
										"letta",
										"tools"
									]
								}
							}
						},
						{
							"name": "Register Data Comparator",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"sourceCode\": \"def data_comparator(table_name: str, id1: int, id2: int):\\n    \\\"\\\"\\\"\\n    Compare two records from the database to find differences in key attributes.\\n    \\n    Args:\\n        table_name (str): Name of the table (e.g. posts, wallets)\\n        id1 (int): ID of the first record\\n        id2 (int): ID of the second record\\n    \\\"\\\"\\\"\\n    pass\",\n    \"description\": \"Compare two records from the database.\",\n    \"name\": \"data_comparator\"\n}"
								},
								"url": {
									"raw": "http://localhost:4000/api/letta/tools",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "4000",
									"path": [
										"api",
										"letta",
										"tools"
									]
								}
							}
						},
						{
							"name": "Register Statistics Aggregator",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"sourceCode\": \"def statistics_aggregator(table_name: str, column: str, operation: str = \\\"count\\\"):\\n    \\\"\\\"\\\"\\n    Calculate statistics (sum, avg, count) for a database column.\\n    \\n    Args:\\n        table_name (str): Name of the table\\n        column (str): Column to aggregate\\n        operation (str): Operation: count, sum, avg, min, max\\n    \\\"\\\"\\\"\\n    pass\",\n    \"description\": \"Calculate statistics for a database column.\",\n    \"name\": \"statistics_aggregator\"\n}"
								},
								"url": {
									"raw": "http://localhost:4000/api/letta/tools",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "4000",
									"path": [
										"api",
										"letta",
										"tools"
									]
								}
							}
						},
						{
							"name": "Register Calculator",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"sourceCode\": \"def calculator(expression: str):\\n    \\\"\\\"\\\"\\n    Perform basic arithmetic calculations.\\n    \\n    Args:\\n        expression (str): Mathematical expression (e.g. 50 * 10)\\n    \\\"\\\"\\\"\\n    pass\",\n    \"description\": \"Perform basic arithmetic calculations.\",\n    \"name\": \"calculator\"\n}"
								},
								"url": {
									"raw": "http://localhost:4000/api/letta/tools",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "4000",
									"path": [
										"api",
										"letta",
										"tools"
									]
								}
							}
						}
					]
				},
				{
					"name": "Block",
					"item": [
						{
							"name": "Delete Memory Block",
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "http://localhost:4000/api/letta/blocks/:blockId",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "4000",
									"path": [
										"api",
										"letta",
										"blocks",
										":blockId"
									],
									"variable": [
										{
											"key": "blockId",
											"value": ""
										}
									]
								}
							}
						}
					]
				}
			]
		},
		{
			"name": "2. Rails Client Integration",
			"item": [
				{
					"name": "Send Message to Client",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"agent_id\": \"{{AGENT_ID}}\",\n    \"message\": \"Tìm 5 bài viết published có tiêu đề chứa chữ Hills\"\n}"
						},
						"url": {
							"raw": "http://localhost:3000/external/letta",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"external",
								"letta"
							]
						}
					}
				},
				{
					"name": "Chat - Samara Corwin",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"agent_id\": \"{{AGENT_ID}}\",\n    \"message\": \"Tìm cho tôi các bài viets của Samara Corwin\"\n}"
						},
						"url": {
							"raw": "http://localhost:3000/external/letta",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"external",
								"letta"
							]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "AGENT_ID",
			"value": ""
		}
	]
}
